import{o as m,c as p,a as t,b as V,d as b,u as h,t as x,F as q,r as H,p as G,e as K,n as R,f as k,g as Y,h as z,w as E,v as L,i as lt,j as N,k as dt,l as ot,m as at,q as F,s as ut,x as mt}from"./vue-tBjdizMu.js";import{o as pt}from"./idb-Dob3nYDb.js";import{C as tt,r as gt}from"./chartjs-BlhQl6SW.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function a(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=a(o);fetch(o.href,i)}})();function ht(e,s){return m(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})])}function ft(e,s){return m(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})])}function yt(e,s){return m(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})])}function vt(e,s){return m(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"})])}function et(e,s){return m(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})])}function xt(e,s){return m(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})])}function wt(e,s){return m(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"})])}function _t(e,s){return m(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function kt(e,s){return m(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})])}const Z=(e,s)=>{const a=e.__vccOpts||e;for(const[n,o]of s)a[n]=o;return a},J=e=>(G("data-v-3d977820"),e=e(),K(),e),bt={class:"w-full"},St={class:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 sm:mb-8 gap-3 sm:gap-4"},Tt={class:"flex items-center gap-2 sm:gap-4"},$t={class:"w-10 h-10 sm:w-12 sm:h-12 rounded-full candy-gradient flex items-center justify-center flex-shrink-0"},Bt=J(()=>t("div",{class:"min-w-0"},[t("h2",{class:"text-lg sm:text-2xl font-bold bg-gradient-to-r from-candy-pink to-candy-blue bg-clip-text text-transparent truncate"}," Candy Pomodoro "),t("p",{class:"text-gray-400 text-xs sm:text-sm"},"Sweet productivity at your pace!")],-1)),Dt={class:"bg-white/10 px-3 sm:px-4 py-1 sm:py-2 rounded-full whitespace-nowrap"},Et={class:"text-candy-yellow font-bold text-sm sm:text-base"},At=J(()=>t("span",{class:"text-gray-400 ml-1 text-xs sm:text-sm"},"sessions",-1)),Ct={class:"relative w-56 h-56 sm:w-64 sm:h-64 md:w-72 md:h-72 mx-auto mb-6 sm:mb-8"},Pt={class:"progress-ring w-full h-full drop-shadow-lg",viewBox:"0 0 300 300"},jt=["stroke-dasharray","stroke-dashoffset"],Nt=J(()=>t("defs",null,[t("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},[t("stop",{offset:"0%",style:{"stop-color":"#FF69B4","stop-opacity":"1"}}),t("stop",{offset:"100%",style:{"stop-color":"#6EC5E9","stop-opacity":"1"}})])],-1)),It={class:"absolute inset-0 flex flex-col items-center justify-center px-2"},Ot={class:"text-5xl sm:text-6xl md:text-7xl font-bold bg-gradient-to-r from-candy-pink to-candy-blue bg-clip-text text-transparent"},Lt={class:"text-base sm:text-lg md:text-xl text-gray-300 mt-2"},Mt={class:"text-xs sm:text-sm text-gray-400 mt-1"},Vt={class:"flex justify-center items-center gap-3 sm:gap-4 mb-6 sm:mb-8 overflow-x-auto px-2"},Rt={class:"flex gap-2"},Ft={__name:"TimerDisplay",props:{currentTime:String,timerType:String,currentSession:Number,completedSessions:Number,sessionsBeforeLongBreak:Number,progress:Number,strokeDashoffset:Number,circumference:Number},setup(e){const s=e,a=V(()=>{switch(s.timerType){case"focus":return"Focus Time üéØ";case"shortBreak":return"Short Break üç¨";case"longBreak":return"Long Break üéâ";default:return"Focus Time"}});return(n,o)=>(m(),p("div",bt,[t("div",St,[t("div",Tt,[t("div",$t,[b(h(yt),{class:"w-5 h-5 sm:w-6 sm:h-6 text-white"})]),Bt]),t("div",Dt,[t("span",Et,x(e.completedSessions),1),At])]),t("div",Ct,[(m(),p("svg",Pt,[t("circle",{class:"progress-ring-circle","stroke-dasharray":e.circumference,"stroke-dashoffset":e.strokeDashoffset,"stroke-width":"12",stroke:"url(#gradient)",fill:"transparent",r:"138",cx:"150",cy:"150"},null,8,jt),Nt])),t("div",It,[t("div",Ot,x(e.currentTime),1),t("div",Lt,x(a.value),1),t("div",Mt,"Session "+x(e.currentSession)+" of "+x(e.sessionsBeforeLongBreak),1)])]),t("div",Vt,[t("div",Rt,[(m(!0),p(q,null,H(e.sessionsBeforeLongBreak,i=>(m(),p("div",{key:i,class:R(["w-3 h-3 rounded-full transition-all duration-300",i<=e.currentSession?"bg-candy-pink scale-125":"bg-gray-600"])},null,2))),128))])])]))}},Ut=Z(Ft,[["__scopeId","data-v-3d977820"]]),zt={class:"candy-card w-full"},Wt={class:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3 lg:gap-4"},qt=["disabled"],Ht=t("span",{class:"hidden sm:inline"},"Start",-1),Gt=["disabled"],Kt=t("span",{class:"hidden sm:inline"},"Pause",-1),Yt=t("span",{class:"hidden sm:inline"},"Reset",-1),Zt=t("span",{class:"hidden sm:inline"},"Skip",-1),Jt={__name:"TimerControls",props:{isRunning:Boolean,isPaused:Boolean},emits:["start","pause","reset","skip"],setup(e,{emit:s}){const a=s,n=()=>a("start"),o=()=>a("pause"),i=()=>a("reset"),d=()=>a("skip");return(u,S)=>(m(),p("div",zt,[t("div",Wt,[t("button",{onClick:n,disabled:e.isRunning,class:"candy-btn bg-gradient-to-r from-candy-green to-emerald-500 hover:from-emerald-500 hover:to-candy-green disabled:opacity-50 disabled:cursor-not-allowed w-full justify-center text-xs sm:text-sm py-2 sm:py-3"},[b(h(wt),{class:"w-4 h-4 sm:w-5 sm:h-5"}),Ht],8,qt),t("button",{onClick:o,disabled:!e.isRunning||e.isPaused,class:"candy-btn bg-gradient-to-r from-candy-yellow to-amber-500 hover:from-amber-500 hover:to-candy-yellow disabled:opacity-50 disabled:cursor-not-allowed w-full justify-center text-xs sm:text-sm py-2 sm:py-3"},[b(h(xt),{class:"w-4 h-4 sm:w-5 sm:h-5"}),Kt],8,Gt),t("button",{onClick:i,class:"candy-btn bg-gradient-to-r from-candy-blue to-cyan-500 hover:from-cyan-500 hover:to-candy-blue w-full justify-center text-xs sm:text-sm py-2 sm:py-3"},[b(h(ht),{class:"w-4 h-4 sm:w-5 sm:h-5"}),Yt]),t("button",{onClick:d,class:"candy-btn bg-gradient-to-r from-candy-purple to-violet-500 hover:from-violet-500 hover:to-candy-purple w-full justify-center text-xs sm:text-sm py-2 sm:py-3"},[b(h(vt),{class:"w-4 h-4 sm:w-5 sm:h-5"}),Zt])])]))}},Qt="candy-pomodoro-db",nt=2;let U=null;const $=async()=>U||(U=await pt(Qt,nt,{upgrade(e,s,a){if(console.log(`Upgrading database from ${s} to ${a}`),!e.objectStoreNames.contains("tasks")){const n=e.createObjectStore("tasks",{keyPath:"id",autoIncrement:!0});n.createIndex("createdAt","createdAt"),n.createIndex("completed","completed"),n.createIndex("date","date")}if(!e.objectStoreNames.contains("sessions")){const n=e.createObjectStore("sessions",{keyPath:"id",autoIncrement:!0});n.createIndex("date","date"),n.createIndex("type","type"),n.createIndex("createdAt","createdAt")}e.objectStoreNames.contains("settings")||e.createObjectStore("settings",{keyPath:"key"}),e.objectStoreNames.contains("stats")||e.createObjectStore("stats",{keyPath:"date"})}}),U),B={async getTasks(e=null){try{const s=await $();return e?s.transaction("tasks","readonly").store.index("date").getAll(e):s.getAll("tasks")}catch(s){return console.error("Error getting tasks:",s),[]}},async addTask(e){try{const s=await $(),a={...e,date:new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),completed:e.completed||!1};return await s.add("tasks",a)}catch(s){throw console.error("Error adding task:",s),s}},async updateTask(e,s){try{const n=(await $()).transaction("tasks","readwrite"),o=n.objectStore("tasks"),i=await o.get(e);if(i){const d={...i,...s,updatedAt:new Date().toISOString()};return await o.put(d),await n.done,d}return null}catch(a){throw console.error("Error updating task:",a),a}},async deleteTask(e){try{return(await $()).delete("tasks",e)}catch(s){throw console.error("Error deleting task:",s),s}},async clearCompletedTasks(){try{const s=(await $()).transaction("tasks","readwrite"),a=s.objectStore("tasks"),o=await a.index("completed").getAll(!0);return await Promise.all(o.map(i=>a.delete(i.id))),await s.done,o.length}catch(e){throw console.error("Error clearing completed tasks:",e),e}},async addSession(e){try{const s=await $(),a={...e,date:new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),completedAt:e.completedAt||new Date().toISOString()};return await s.add("sessions",a)}catch(s){throw console.error("Error adding session:",s),s}},async getSessions(e=null){try{const s=await $();return e?s.transaction("sessions","readonly").store.index("date").getAll(e):s.getAll("sessions")}catch(s){return console.error("Error getting sessions:",s),[]}},async getTodaySessions(){try{const e=new Date().toISOString().split("T")[0];return this.getSessions(e)}catch(e){return console.error("Error getting today sessions:",e),[]}},async getWeeklySessions(){try{const e=await $(),s=new Date;return s.setDate(s.getDate()-7),(await e.getAll("sessions")).filter(n=>new Date(n.date)>=s)}catch(e){return console.error("Error getting weekly sessions:",e),[]}},async getWeeklyStats(){try{const e=await this.getWeeklySessions(),s=new Array(7).fill(0);return e.forEach(a=>{if(a.type==="focus"){const o=new Date(a.date).getDay();s[o]+=a.duration||25}}),s.slice().concat(s).slice(1,8)}catch(e){return console.error("Error getting weekly stats:",e),[0,0,0,0,0,0,0]}},async getTodayStats(){try{const e=new Date().toISOString().split("T")[0],a=(await this.getSessions(e)).filter(d=>d.type==="focus"),n=a.reduce((d,u)=>d+(u.duration||25),0),i=(await this.getTasks(e)).filter(d=>d.completed).length;return{focusTime:n,sessions:a.length,tasksCompleted:i,productivity:a.length>0?Math.min(100,Math.floor(n/(a.length*25)*100)):0}}catch(e){return console.error("Error getting today stats:",e),{focusTime:0,sessions:0,tasksCompleted:0,productivity:0}}},async saveSettings(e){try{const a=(await $()).transaction("settings","readwrite");return await a.store.put({key:"userSettings",value:e}),await a.done,e}catch(s){throw console.error("Error saving settings:",s),s}},async getSettings(){try{const s=await(await $()).get("settings","userSettings");return s?s.value:null}catch(e){return console.error("Error getting settings:",e),null}},async clearAllData(){try{const s=(await $()).transaction(["tasks","sessions","stats"],"readwrite");return await Promise.all([s.objectStore("tasks").clear(),s.objectStore("sessions").clear(),s.objectStore("stats").clear()]),await s.done,!0}catch(e){throw console.error("Error clearing data:",e),e}},async exportData(){try{const e=await $(),[s,a,n]=await Promise.all([e.getAll("tasks"),e.getAll("sessions"),e.getAll("settings")]);return{version:nt,exportedAt:new Date().toISOString(),tasks:s,sessions:a,settings:n}}catch(e){throw console.error("Error exporting data:",e),e}},async importData(e){try{await this.clearAllData();const a=(await $()).transaction(["tasks","sessions","settings"],"readwrite");return e.tasks&&await Promise.all(e.tasks.map(n=>a.objectStore("tasks").add(n))),e.sessions&&await Promise.all(e.sessions.map(n=>a.objectStore("sessions").add(n))),e.settings&&await Promise.all(e.settings.map(n=>a.objectStore("settings").add(n))),await a.done,!0}catch(s){throw console.error("Error importing data:",s),s}}},rt=Object.freeze(Object.defineProperty({__proto__:null,db:B},Symbol.toStringTag,{value:"Module"})),Xt={class:"candy-card h-auto w-full"},te={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6 gap-2 sm:gap-4"},ee={class:"text-base sm:text-lg lg:text-xl font-bold text-candy-blue flex items-center gap-2"},se=t("span",null,"Today's Tasks",-1),oe={class:"bg-candy-pink/20 text-candy-pink px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm whitespace-nowrap"},ae={class:"flex flex-col sm:flex-row gap-2 mb-4 sm:mb-6"},ne=t("span",{class:"ml-1"},"Add",-1),re={class:"space-y-2 sm:space-y-3 max-h-64 overflow-y-auto pr-1 sm:pr-2"},ie={class:"flex items-start sm:items-center gap-2 sm:gap-3"},ce=["onClick"],le=["onClick"],de={key:0,class:"text-xs text-gray-500 mt-2 ml-7 sm:ml-9"},ue={key:0,class:"text-center py-8 sm:py-12 text-gray-400"},me=t("p",{class:"text-sm sm:text-base"},"No tasks yet. Add one above!",-1),pe={__name:"TaskManager",setup(e){const s=k([]),a=k(""),n=V(()=>s.value.filter(l=>!l.completed).length);let o=null;const i=async()=>{try{s.value=await B.getTasks(),console.log("Tasks loaded:",s.value)}catch(l){console.error("Error loading tasks:",l)}},d=async()=>{if(!a.value.trim()){console.log("Task is empty, skipping");return}try{console.log("Adding task:",a.value);const l={text:a.value.trim()};await B.addTask(l),console.log("Task added successfully"),a.value="",await i(),console.log("Tasks reloaded, total:",s.value.length)}catch(l){console.error("Error adding task:",l)}},u=async l=>{try{const c=s.value.find(r=>r.id===l);c&&(await B.updateTask(l,{completed:!c.completed}),await i())}catch(c){console.error("Error toggling task:",c)}},S=async l=>{try{await B.deleteTask(l),await i()}catch(c){console.error("Error deleting task:",c)}},g=l=>new Date(l).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return Y(()=>{i(),o=setInterval(()=>{i()},2e3)}),z(()=>{o&&clearInterval(o)}),(l,c)=>(m(),p("div",Xt,[t("div",te,[t("h3",ee,[b(h(et),{class:"w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0"}),se]),t("span",oe,x(n.value)+" pending ",1)]),t("div",ae,[E(t("input",{"onUpdate:modelValue":c[0]||(c[0]=r=>a.value=r),onKeyup:lt(d,["enter"]),type:"text",placeholder:"Add a task...",class:"candy-input flex-1 text-sm"},null,544),[[L,a.value]]),t("button",{onClick:d,class:"candy-btn bg-gradient-to-r from-candy-pink to-rose-500 hover:from-rose-500 hover:to-candy-pink w-full sm:w-auto justify-center py-2 text-xs sm:text-sm"},[b(h(_t),{class:"w-4 h-4 sm:w-5 sm:h-5"}),ne])]),t("div",re,[(m(!0),p(q,null,H(s.value,r=>(m(),p("div",{key:r.id,class:R(["bg-white/5 rounded-lg sm:rounded-xl p-3 sm:p-4 border-l-4 transition-all duration-300 text-sm sm:text-base",{"border-candy-blue":!r.completed,"border-candy-green":r.completed,"opacity-60":r.completed}])},[t("div",ie,[t("button",{onClick:y=>u(r.id),class:R(["w-5 h-5 sm:w-6 sm:h-6 rounded-full border-2 flex items-center justify-center transition-all flex-shrink-0 mt-0.5 sm:mt-0",r.completed?"border-candy-green bg-candy-green":"border-candy-blue hover:border-candy-pink"])},[r.completed?(m(),dt(h(ft),{key:0,class:"w-3 h-3 sm:w-4 sm:h-4 text-white"})):N("",!0)],10,ce),t("span",{class:R(["flex-1 transition-all duration-300 break-words",r.completed?"line-through text-gray-400":"text-white"])},x(r.text),3),t("button",{onClick:y=>S(r.id),class:"text-gray-400 hover:text-candy-pink transition-colors p-1 flex-shrink-0"},[b(h(kt),{class:"w-4 h-4 sm:w-5 sm:h-5"})],8,le)]),r.createdAt?(m(),p("div",de," Added "+x(g(r.createdAt)),1)):N("",!0)],2))),128)),s.value.length===0?(m(),p("div",ue,[b(h(et),{class:"w-8 h-8 sm:w-12 sm:h-12 mx-auto mb-2 sm:mb-3 opacity-30"}),me])):N("",!0)])]))}},P=e=>(G("data-v-5c21ff5d"),e=e(),K(),e),ge={class:"stats-panel"},he=P(()=>t("h2",{class:"text-2xl font-bold text-candy-blue mb-6 flex items-center gap-2"}," üìä Statistics Dashboard ",-1)),fe={class:"grid grid-cols-2 gap-4 mb-8"},ye={class:"stat-card"},ve={class:"stat-value text-candy-pink"},xe=P(()=>t("div",{class:"stat-label"},"Focus Minutes",-1)),we={class:"stat-card"},_e={class:"stat-value text-candy-blue"},ke=P(()=>t("div",{class:"stat-label"},"Sessions",-1)),be={class:"stat-card"},Se={class:"stat-value text-candy-green"},Te=P(()=>t("div",{class:"stat-label"},"Tasks Done",-1)),$e={class:"stat-card"},Be={class:"stat-value text-candy-yellow"},De=P(()=>t("div",{class:"stat-label"},"Productivity",-1)),Ee={class:"mb-8"},Ae=P(()=>t("h3",{class:"text-lg font-semibold text-gray-300 mb-4"},"Weekly Focus Time",-1)),Ce={class:"chart-container"},Pe=P(()=>t("h3",{class:"text-lg font-semibold text-gray-300 mb-4"},"Recent Sessions",-1)),je={class:"space-y-3"},Ne={class:"flex justify-between items-center"},Ie={class:"flex items-center gap-2"},Oe={class:"text-white"},Le={class:"text-candy-yellow"},Me={class:"text-gray-400 text-sm mt-1"},Ve={key:0,class:"text-center py-4 text-gray-400"},Re={__name:"StatisticsPanel",setup(e){tt.register(...gt);const s=k(null);let a=null;const n=k({today:{focusTime:0,sessions:0,tasksCompleted:0,productivity:0}}),o=k([]),i=l=>({focus:"Focus Session",shortBreak:"Short Break",longBreak:"Long Break"})[l]||l,d=l=>new Date(l).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),u=async()=>{try{const l=await B.getWeeklyStats(),c=new Date;c.setHours(0,0,0,0);const r=l.filter(f=>{const v=new Date(f.completedAt);return v.setHours(0,0,0,0),v.getTime()===c.getTime()}),y=r.filter(f=>f.type==="focus").reduce((f,v)=>f+(v.duration||0),0);n.value.today={focusTime:y,sessions:r.length,tasksCompleted:r.length,productivity:r.length>0?Math.min(100,Math.round(y/125*100)):0},o.value=l.slice(-10).reverse()}catch(l){console.error("Error loading stats:",l)}},S=()=>{if(!s.value)return;a&&a.destroy();const l=new Date,c=[],r=[];for(let f=6;f>=0;f--){const v=new Date(l);v.setDate(v.getDate()-f),v.setHours(0,0,0,0),r.push(v.toLocaleDateString("en-US",{weekday:"short"})),c.push(0)}const y={};o.value.forEach(f=>{if(f.type==="focus"){const C=new Date(f.completedAt).toLocaleDateString("en-US",{weekday:"short"});y[C]=(y[C]||0)+(f.duration||0)}}),r.forEach((f,v)=>{c[v]=y[f]||0}),a=new tt(s.value,{type:"line",data:{labels:r,datasets:[{label:"Focus Time (min)",data:c,borderColor:"#FF69B4",backgroundColor:"rgba(255, 105, 180, 0.1)",borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:"#6EC5E9",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:5}]},options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#b8b8d1"}},x:{grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#b8b8d1"}}}}})};let g=null;return Y(async()=>{await u(),setTimeout(()=>{S()},100),g=setInterval(async()=>{await u(),setTimeout(()=>{S()},50)},5e3)}),z(()=>{a&&a.destroy(),g&&clearInterval(g)}),(l,c)=>(m(),p("div",ge,[he,t("div",fe,[t("div",ye,[t("div",ve,x(n.value.today.focusTime),1),xe]),t("div",we,[t("div",_e,x(n.value.today.sessions),1),ke]),t("div",be,[t("div",Se,x(n.value.today.tasksCompleted),1),Te]),t("div",$e,[t("div",Be,x(n.value.today.productivity)+"%",1),De])]),t("div",Ee,[Ae,t("div",Ce,[t("canvas",{ref_key:"chartCanvas",ref:s},null,512)])]),t("div",null,[Pe,t("div",je,[(m(!0),p(q,null,H(o.value,(r,y)=>(m(),p("div",{key:y,class:"session-item"},[t("div",Ne,[t("div",Ie,[t("div",{class:R(["session-type",r.type])},null,2),t("span",Oe,x(i(r.type)),1)]),t("div",Le,x(r.duration)+"min",1)]),t("div",Me,x(d(r.completedAt)),1)]))),128)),o.value.length===0?(m(),p("div",Ve," No sessions recorded yet. Start your first Pomodoro! ")):N("",!0)])])]))}},Fe=Z(Re,[["__scopeId","data-v-5c21ff5d"]]),Ue="modulepreload",ze=function(e){return"/pomodoro-timer-vue/"+e},st={},it=function(s,a,n){let o=Promise.resolve();if(a&&a.length>0){let S=function(g){return Promise.all(g.map(l=>Promise.resolve(l).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),u=d?.nonce||d?.getAttribute("nonce");o=S(a.map(g=>{if(g=ze(g),g in st)return;st[g]=!0;const l=g.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${c}`))return;const r=document.createElement("link");if(r.rel=l?"stylesheet":Ue,l||(r.as="script"),r.crossOrigin="",r.href=g,u&&r.setAttribute("nonce",u),document.head.appendChild(r),l)return new Promise((y,f)=>{r.addEventListener("load",y),r.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${g}`)))})}))}function i(d){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=d,window.dispatchEvent(u),!u.defaultPrevented)throw d}return o.then(d=>{for(const u of d||[])u.status==="rejected"&&i(u.reason);return s().catch(i)})},ct=async(e="complete")=>{try{const{db:s}=await it(async()=>{const{db:u}=await Promise.resolve().then(()=>rt);return{db:u}},void 0),a=await s.getSettings();if(a&&!a.soundEnabled)return;const n=new(window.AudioContext||window.webkitAudioContext),o=n.createOscillator(),i=n.createGain();o.connect(i),i.connect(n.destination);const d={start:523.25,complete:659.25,alert:783.99,pause:392};o.frequency.value=d[e]||440,o.type="sine",i.gain.setValueAtTime(.3,n.currentTime),i.gain.exponentialRampToValueAtTime(.01,n.currentTime+.5),o.start(n.currentTime),o.stop(n.currentTime+.5)}catch(s){console.log("Audio playback not supported or failed:",s);try{const a=new Audio,n={start:"https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3",complete:"https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3",alert:"https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3"};a.src=n[e]||n.complete,a.volume=.3,await a.play()}catch(a){console.log("Fallback audio also failed:",a)}}},M=async(e,s)=>{try{const{db:a}=await it(async()=>{const{db:o}=await Promise.resolve().then(()=>rt);return{db:o}},void 0),n=await a.getSettings();if(n&&!n.desktopNotifications)return;if(!("Notification"in window)){console.log("This browser does not support notifications");return}Notification.permission==="granted"?new Notification(e,{body:s,icon:"/vite.svg",badge:"/vite.svg",tag:"pomodoro-notification",requireInteraction:!1}):Notification.permission==="default"&&await Notification.requestPermission()==="granted"&&new Notification(e,{body:s})}catch(a){console.error("Error showing notification:",a)}},w=e=>(G("data-v-81bb8668"),e=e(),K(),e),We={class:"settings-panel"},qe={class:"flex justify-between items-center mb-6"},He=w(()=>t("h2",{class:"text-2xl font-bold text-candy-blue flex items-center gap-2"}," ‚öôÔ∏è Timer Settings ",-1)),Ge={class:"mb-8"},Ke=w(()=>t("h3",{class:"text-lg font-semibold text-gray-300 mb-4"},"Timer Durations",-1)),Ye={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ze={class:"setting-item"},Je=w(()=>t("label",{class:"setting-label"},"Focus Time (min)",-1)),Qe=w(()=>t("div",{class:"text-xs text-gray-400 mt-1"},"Default: 25 min",-1)),Xe={class:"setting-item"},ts=w(()=>t("label",{class:"setting-label"},"Short Break (min)",-1)),es=w(()=>t("div",{class:"text-xs text-gray-400 mt-1"},"Default: 5 min",-1)),ss={class:"setting-item"},os=w(()=>t("label",{class:"setting-label"},"Long Break (min)",-1)),as=w(()=>t("div",{class:"text-xs text-gray-400 mt-1"},"Default: 15 min",-1)),ns={class:"mb-8"},rs=w(()=>t("h3",{class:"text-lg font-semibold text-gray-300 mb-4"},"Advanced Settings",-1)),is={class:"space-y-4"},cs={class:"setting-item"},ls=w(()=>t("label",{class:"setting-label"},"Sessions Before Long Break",-1)),ds=w(()=>t("div",{class:"text-xs text-gray-400 mt-1"},"Default: 4 sessions",-1)),us={class:"space-y-3"},ms={class:"flex items-center gap-3"},ps=w(()=>t("label",{for:"autoStartBreaks",class:"text-white cursor-pointer"}," Auto-start breaks after focus sessions ",-1)),gs={class:"flex items-center gap-3"},hs=w(()=>t("label",{for:"autoStartPomodoros",class:"text-white cursor-pointer"}," Auto-start next pomodoro after breaks ",-1)),fs={class:"flex items-center gap-3"},ys=w(()=>t("label",{for:"desktopNotifications",class:"text-white cursor-pointer"}," Enable desktop notifications ",-1)),vs={class:"flex items-center gap-3"},xs=w(()=>t("label",{for:"soundEnabled",class:"text-white cursor-pointer"}," Enable sound alerts ",-1)),ws={key:0,class:"mt-6 p-4 bg-candy-blue/10 rounded-xl"},_s=w(()=>t("p",{class:"text-sm text-candy-blue mb-2"},"üîî Enable desktop notifications for timer alerts",-1)),ks={__name:"SettingsPanel",props:{settings:{type:Object,required:!0}},emits:["update","close"],setup(e,{emit:s}){const a=e,n=s,o=ot({...a.settings}),i=k("Notification"in window&&Notification.permission==="granted"),d=()=>{n("update",{...o}),ct("start"),M("Settings Saved","Your preferences have been updated!")},u=()=>{confirm("Reset all settings to defaults?")&&(Object.assign(o,{focusTime:25,shortBreak:5,longBreak:15,sessionsBeforeLongBreak:4,autoStartBreaks:!0,autoStartPomodoros:!0,desktopNotifications:!0,soundEnabled:!0}),M("Settings Reset","All settings have been reset to defaults"))},S=()=>{confirm("‚ö†Ô∏è WARNING: This will delete all tasks and session history. This cannot be undone!")&&(localStorage.clear(),sessionStorage.clear(),M("Data Cleared","All data has been deleted"))},g=async()=>{if("Notification"in window){const l=await Notification.requestPermission();i.value=l==="granted",i.value&&M("Notifications Enabled","You will now receive timer alerts!")}};return at(()=>a.settings,l=>{Object.assign(o,l)},{deep:!0}),(l,c)=>(m(),p("div",We,[t("div",qe,[He,t("button",{onClick:c[0]||(c[0]=r=>l.$emit("close")),class:"text-gray-400 hover:text-white transition"}," ‚úï ")]),t("div",Ge,[Ke,t("div",Ye,[t("div",Ze,[Je,E(t("input",{"onUpdate:modelValue":c[1]||(c[1]=r=>o.focusTime=r),type:"number",min:"1",max:"60",class:"setting-input"},null,512),[[L,o.focusTime,void 0,{number:!0}]]),Qe]),t("div",Xe,[ts,E(t("input",{"onUpdate:modelValue":c[2]||(c[2]=r=>o.shortBreak=r),type:"number",min:"1",max:"30",class:"setting-input"},null,512),[[L,o.shortBreak,void 0,{number:!0}]]),es]),t("div",ss,[os,E(t("input",{"onUpdate:modelValue":c[3]||(c[3]=r=>o.longBreak=r),type:"number",min:"1",max:"60",class:"setting-input"},null,512),[[L,o.longBreak,void 0,{number:!0}]]),as])])]),t("div",ns,[rs,t("div",is,[t("div",cs,[ls,E(t("input",{"onUpdate:modelValue":c[4]||(c[4]=r=>o.sessionsBeforeLongBreak=r),type:"number",min:"1",max:"8",class:"setting-input"},null,512),[[L,o.sessionsBeforeLongBreak,void 0,{number:!0}]]),ds]),t("div",us,[t("div",ms,[E(t("input",{type:"checkbox","onUpdate:modelValue":c[5]||(c[5]=r=>o.autoStartBreaks=r),id:"autoStartBreaks",class:"setting-checkbox"},null,512),[[F,o.autoStartBreaks]]),ps]),t("div",gs,[E(t("input",{type:"checkbox","onUpdate:modelValue":c[6]||(c[6]=r=>o.autoStartPomodoros=r),id:"autoStartPomodoros",class:"setting-checkbox"},null,512),[[F,o.autoStartPomodoros]]),hs]),t("div",fs,[E(t("input",{type:"checkbox","onUpdate:modelValue":c[7]||(c[7]=r=>o.desktopNotifications=r),id:"desktopNotifications",class:"setting-checkbox"},null,512),[[F,o.desktopNotifications]]),ys]),t("div",vs,[E(t("input",{type:"checkbox","onUpdate:modelValue":c[8]||(c[8]=r=>o.soundEnabled=r),id:"soundEnabled",class:"setting-checkbox"},null,512),[[F,o.soundEnabled]]),xs])])])]),t("div",{class:"flex gap-4"},[t("button",{onClick:d,class:"candy-btn bg-gradient-to-r from-candy-green to-emerald-500"}," üíæ Save Settings "),t("button",{onClick:u,class:"candy-btn bg-gradient-to-r from-candy-blue to-cyan-500"}," üîÑ Reset to Defaults "),t("button",{onClick:S,class:"candy-btn bg-gradient-to-r from-red-500 to-red-600"}," üóëÔ∏è Clear All Data ")]),i.value?N("",!0):(m(),p("div",ws,[_s,t("button",{onClick:g,class:"px-4 py-2 bg-candy-blue text-white rounded-lg text-sm"}," Enable Notifications ")]))]))}},bs=Z(ks,[["__scopeId","data-v-81bb8668"]]);function Ss(e){const s=k(!1),a=k(!1),n=k(1500),o=k("focus"),i=k(1),d=k(0);let u=null;const S=V(()=>{const T=Math.floor(n.value/60),D=n.value%60;return`${T.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`}),g=V(()=>{const T=o.value==="focus"?e.focusTime*60:o.value==="shortBreak"?e.shortBreak*60:e.longBreak*60;return 1-n.value/T}),l=2*Math.PI*138,c=V(()=>l-g.value*l),r=()=>{s.value||(s.value=!0,a.value=!1,u=setInterval(()=>{n.value>0?n.value--:C()},1e3))},y=()=>{s.value&&(s.value=!1,a.value=!0,clearInterval(u))},f=()=>{s.value=!1,a.value=!1,clearInterval(u),j()},v=()=>{C()},C=async()=>{clearInterval(u),s.value=!1,a.value=!1,await B.addSession({type:o.value,duration:o.value==="focus"?e.focusTime:o.value==="shortBreak"?e.shortBreak:e.longBreak,completedAt:new Date().toISOString()}),o.value==="focus"&&d.value++,e.soundEnabled&&ct("complete"),e.desktopNotifications&&M(o.value==="focus"?"Focus session complete!":"Break time over!",o.value==="focus"?"Time for a break!":"Ready to focus again?"),W()},W=()=>{o.value==="focus"?(i.value++,i.value>e.sessionsBeforeLongBreak?(o.value="longBreak",i.value=1):o.value="shortBreak"):o.value="focus",j(),(o.value==="shortBreak"&&e.autoStartBreaks||o.value==="longBreak"&&e.autoStartBreaks||o.value==="focus"&&e.autoStartPomodoros)&&setTimeout(()=>r(),1e3)},j=()=>{n.value=o.value==="focus"?e.focusTime*60:o.value==="shortBreak"?e.shortBreak*60:e.longBreak*60},I=async()=>{const T=await B.getSettings();if(T?.timerState){const D=T.timerState;o.value=D.timerType||"focus",i.value=D.currentSession||1,d.value=D.completedSessions||0,j()}},O=async()=>{const T={timerType:o.value,currentSession:i.value,completedSessions:d.value},D=await B.getSettings()||{};await B.saveSettings({...D,timerState:T})};return at([o,i,d],async()=>{try{await O()}catch(T){console.error("Error auto-saving timer state:",T)}},{deep:!0}),z(()=>{u&&clearInterval(u),O()}),j(),{isRunning:s,isPaused:a,currentTime:S,timerType:o,currentSession:i,completedSessions:d,progress:g,strokeDashoffset:c,circumference:l,startTimer:r,pauseTimer:y,resetTimer:f,skipTimer:v,loadTimerState:I,saveTimerState:O}}const Ts={class:"min-h-screen bg-gradient-to-br from-dark-bg to-gray-900"},$s={class:"candy-gradient py-4 sm:py-6 px-3 sm:px-4 md:px-6 lg:px-8 shadow-2xl sticky top-0 z-50"},Bs={class:"container mx-auto"},Ds={class:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 sm:gap-4"},Es=ut('<div class="flex items-center gap-2 sm:gap-4 min-w-0"><div class="w-12 h-12 sm:w-14 sm:h-14 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center flex-shrink-0"><span class="text-xl sm:text-2xl">üç≠</span></div><div class="min-w-0"><h1 class="text-xl sm:text-3xl md:text-4xl font-bold text-white truncate"> Candy Pomodoro </h1><p class="text-white/80 mt-0.5 sm:mt-1 text-xs sm:text-sm">Vue.js 3 + IndexedDB</p></div></div>',1),As={class:"flex items-center gap-2 sm:gap-3"},Cs={class:"hidden sm:block text-right"},Ps=t("div",{class:"text-white font-bold text-sm"},"Total Focus Time",-1),js={class:"text-candy-yellow text-lg sm:text-2xl font-bold"},Ns=t("span",{class:"text-xl sm:text-2xl"},"‚öôÔ∏è",-1),Is=[Ns],Os={class:"container mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-6 sm:py-8 lg:py-10"},Ls={class:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8 auto-rows-max lg:auto-rows-min"},Ms={class:"lg:col-span-2 space-y-4 sm:space-y-6 lg:space-y-8"},Vs={class:"space-y-4 sm:space-y-6 lg:space-y-8"},Rs={class:"candy-card min-h-72 sm:min-h-80 lg:min-h-96 w-full flex flex-col items-center justify-center"},Fs={key:0,class:"candy-card w-full"},Us=t("footer",{class:"mt-8 sm:mt-12 py-4 sm:py-6 px-3 sm:px-4 md:px-6 lg:px-8 border-t border-white/10"},[t("div",{class:"container mx-auto text-center text-gray-400 text-xs sm:text-sm"},[t("p",null,"Built with Vue.js 3, Chart.js, and IndexedDB ‚Ä¢ Candy Pomodoro Timer v1.0"),t("p",{class:"mt-1 sm:mt-2 text-xs text-gray-500"},"Works offline ‚Ä¢ Data stored locally ‚Ä¢ No tracking")])],-1),zs={__name:"App",setup(e){const s=ot({focusTime:25,shortBreak:5,longBreak:15,sessionsBeforeLongBreak:4,autoStartBreaks:!0,autoStartPomodoros:!0,desktopNotifications:!0,soundEnabled:!0}),a=k(!1),n=k(0),o=Ss(s),{isRunning:i,isPaused:d,currentTime:u,timerType:S,currentSession:g,completedSessions:l,progress:c,strokeDashoffset:r,circumference:y,startTimer:f,pauseTimer:v,resetTimer:C,skipTimer:W,loadTimerState:j}=o;let I=null;"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission().catch(_=>console.log("Notification permission error:",_));const O=async()=>{try{const _=await B.getSettings();_&&Object.assign(s,_)}catch(_){console.log("Error loading settings:",_)}},T=()=>{a.value=!a.value},D=async _=>{try{Object.assign(s,_),await B.saveSettings(s)}catch(A){console.error("Error updating settings:",A)}},Q=async()=>{try{const _=await B.getWeeklyStats();n.value=_.filter(A=>A.type==="focus").reduce((A,X)=>A+(X.duration||0),0)}catch(_){console.log("Error calculating focus time:",_)}};return Y(async()=>{try{await O(),await j(),await Q(),console.log("App mounted successfully!"),I=setInterval(()=>{Q()},5e3)}catch(_){console.error("Error during app initialization:",_)}}),z(()=>{I&&clearInterval(I)}),(_,A)=>(m(),p("div",Ts,[t("header",$s,[t("div",Bs,[t("div",Ds,[Es,t("div",As,[t("div",Cs,[Ps,t("div",js,x(n.value)+"m",1)]),t("button",{onClick:T,class:"p-2 sm:p-3 rounded-xl bg-white/10 hover:bg-white/20 transition-colors flex-shrink-0"},Is)])])])]),t("main",Os,[t("div",Ls,[t("div",Ms,[b(Ut,{"current-time":h(u),"timer-type":h(S),"current-session":h(g),"completed-sessions":h(l),"sessions-before-long-break":s.sessionsBeforeLongBreak,progress:h(c),"stroke-dashoffset":h(r),circumference:h(y)},null,8,["current-time","timer-type","current-session","completed-sessions","sessions-before-long-break","progress","stroke-dashoffset","circumference"]),b(Jt,{"is-running":h(i),"is-paused":h(d),onStart:h(f),onPause:h(v),onReset:h(C),onSkip:h(W)},null,8,["is-running","is-paused","onStart","onPause","onReset","onSkip"]),b(pe)]),t("div",Vs,[t("div",Rs,[b(Fe)]),a.value?(m(),p("div",Fs,[b(bs,{settings:s,onUpdate:D,onClose:A[0]||(A[0]=X=>a.value=!1)},null,8,["settings"])])):N("",!0)])])]),Us]))}};mt(zs).mount("#app");
